{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://saaaaaa.policy.analysis/schemas/contradiction_deteccion/policy_statement.schema.json",
  "title": "PolicyStatement",
  "description": "Representación estructurada de una declaración de política con análisis semántico completo y trazabilidad",
  "type": "object",
  "required": ["text", "dimension", "position", "entities", "temporal_markers", "quantitative_claims"],
  "properties": {
    "text": {
      "type": "string",
      "description": "Texto completo de la declaración de política",
      "minLength": 1,
      "maxLength": 10000
    },
    "dimension": {
      "type": "string",
      "enum": [
        "diagnóstico",
        "estratégico",
        "programático",
        "plan plurianual de inversiones",
        "seguimiento y evaluación",
        "ordenamiento territorial"
      ],
      "description": "Dimensión del Plan de Desarrollo según DNP Colombia"
    },
    "position": {
      "type": "array",
      "items": {"type": "integer", "minimum": 0},
      "minItems": 2,
      "maxItems": 2,
      "description": "Posición en el documento: [start, end] character offsets"
    },
    "entities": {
      "type": "array",
      "items": {
        "type": "string",
        "description": "Entidad nombrada extraída (personas, organizaciones, lugares)"
      },
      "description": "Entidades extraídas mediante NER (Named Entity Recognition)",
      "maxItems": 500
    },
    "temporal_markers": {
      "type": "array",
      "items": {
        "type": "string",
        "description": "Marcador temporal (años, trimestres, deadlines)"
      },
      "description": "Marcadores temporales identificados (2024, Q1, plazo, etc.)",
      "examples": ["2024", "primer trimestre", "antes de diciembre", "Q4 2025"],
      "maxItems": 100
    },
    "quantitative_claims": {
      "type": "array",
      "items": {
        "type": "object",
        "required": ["value", "unit", "context"],
        "properties": {
          "value": {
            "type": "number",
            "description": "Valor numérico de la afirmación"
          },
          "unit": {
            "type": "string",
            "description": "Unidad de medida (%, millones COP, habitantes, etc.)",
            "examples": ["%", "millones COP", "habitantes", "kilómetros", "hectáreas"]
          },
          "context": {
            "type": "string",
            "description": "Contexto textual de la afirmación cuantitativa",
            "maxLength": 500
          },
          "confidence": {
            "type": "number",
            "minimum": 0.0,
            "maximum": 1.0,
            "description": "Confianza en la extracción (0.0-1.0)"
          },
          "is_target": {
            "type": "boolean",
            "description": "Indica si es una meta o línea base"
          },
          "temporal_reference": {
            "type": "string",
            "description": "Referencia temporal de la afirmación"
          }
        },
        "additionalProperties": false
      },
      "description": "Afirmaciones cuantitativas extraídas con análisis estadístico",
      "maxItems": 200
    },
    "embedding": {
      "oneOf": [
        {"type": "null"},
        {
          "type": "array",
          "items": {"type": "number"},
          "minItems": 768,
          "maxItems": 768,
          "description": "Vector de embeddings semánticos (sentence-transformers/paraphrase-multilingual-mpnet-base-v2)"
        }
      ]
    },
    "context_window": {
      "type": "string",
      "description": "Ventana de contexto (párrafos circundantes)",
      "maxLength": 20000
    },
    "semantic_role": {
      "oneOf": [
        {"type": "null"},
        {
          "type": "string",
          "enum": [
            "diagnostic",
            "strategic_objective",
            "activity",
            "product",
            "result",
            "impact",
            "budget_allocation",
            "indicator",
            "responsibility_assignment",
            "temporal_commitment",
            "causal_mechanism",
            "theory_of_change"
          ],
          "description": "Rol semántico en la estructura del plan"
        }
      ]
    },
    "dependencies": {
      "type": "array",
      "items": {
        "type": "string",
        "description": "ID de declaraciones de las que depende esta declaración"
      },
      "description": "Dependencias causales/temporales identificadas",
      "uniqueItems": true,
      "maxItems": 100
    }
  },
  "additionalProperties": false
}
